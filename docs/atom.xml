<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-us">
<title>Andy McKay</title>
<link href="https://mckay.pub/blog/andy" rel="alternate"></link>
<link href="https://mckay.pub/blog/rss/latest/andy/" rel="self"></link>
<updated>2023-06-22T02:37:57+00:00</updated>
<id>https://mckay.pub/blog/andy</id>
<author>
<name>Andy McKay</name>
<email>andy@clearwind.ca</email>
</author>

<entry>
<title>GitOps</title>
<link href="https://mckay.pub/2023-06-21-gitops/"/>
<updated>2023-06-21T00:00:00+00:00</updated>
<id>https://mckay.pub/gitops</id>
<content type="html">&lt;p&gt;A few weeks ago I went to the Vancouver DevOps Meetup, which was my first in person meetup in a long time. Didn‚Äôt know a single person there, but it was good to see people talking about interesting. Also thank you Best Buy for the pair of Airpods I won in the door prize raffle.&lt;/p&gt;

&lt;p&gt;The really interesting part for me was the &lt;a href=&quot;https://about.gitlab.com/topics/gitops/&quot;&gt;talk on GitOps&lt;/a&gt;, which basically is doing everything through Git. This was one of my favourite things at &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;, which didn‚Äôt use the name GitOps (as far as I‚Äôm aware) but did everything through GitHub as either code or issues.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Want to change DNS settings? Create a pull request.&lt;/li&gt;
  &lt;li&gt;Want to spin up a new service? Drop in a pull request with the configuration changes.&lt;/li&gt;
  &lt;li&gt;Want to hire someone? Open an issue.&lt;/li&gt;
  &lt;li&gt;Want to re-organize and change teams? Create a pull request.&lt;/li&gt;
  &lt;li&gt;Want access to a new service, or remove access? Create a pull request.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;All GitHub infrastructure was managed in GitHub. Configuration for services were stored in Git. To change something, you created a pull request with the changes. It would get reviewed by the appropriate teams. When the pull request is merged, then CI would kick off a new deployment with the changes.&lt;/p&gt;

&lt;p&gt;Putting everything into GitHub providing a consistent interface that everyone understood, a consistent notification and review interface, an audit log and so on. This would be consistent across all the tooling. The power of this consistency here can‚Äôt be understated. If you don‚Äôt use this approach you are stuck on the learning curve as you figure out the UI, the API, the terminology and so on. That‚Äôs removed by having it all in one place.&lt;/p&gt;

&lt;p&gt;Of course, it‚Äôs not perfect since often tooling needs to be built to allow this to happen. File formats and configuration will vary across teams and tools, so sometimes it‚Äôs not completely obvious what changes need to be made. Sometimes deploys would happen automatically, sometimes you need to run commands - that sort of thing.&lt;/p&gt;

&lt;p&gt;And of course, it‚Äôs important to ensure that deploys are easy and easy to rollback with appropriate tooling and reviews are in place to ensure that something terrible doesn‚Äôt happen. No-one wants to send in PR and accidentally break the main DNS entries for GitHub (as an example).&lt;/p&gt;

&lt;p&gt;This was one of the cooler things about working at GitHub and I missed it at other places.&lt;/p&gt;
</content>
</entry>

<entry>
<title>Trip report - Juan de Fuca</title>
<link href="https://mckay.pub/2023-06-20-juan-de-fuca/"/>
<updated>2023-06-20T00:00:00+00:00</updated>
<id>https://mckay.pub/juan-de-fuca</id>
<content type="html">&lt;p&gt;The Juan de Fuca trail runs from Jordan River up to Port Renfrew on the West Coast of Vancouver Island. It‚Äôs in the &lt;a href=&quot;https://bcparks.ca/juan-de-fuca-park/&quot;&gt;Juan de Fuca park&lt;/a&gt; and runs 47km from one end to the other.&lt;/p&gt;

&lt;p&gt;Comparisons with the West Coast Trail are common because the West Coast Trail starts at Port Renfrew and heads further north. In fact, sitting in the pub at the end of the trail, you can see where the entrance to the West Coast Trail is. There are four trail heads on the Juan de Fuca Trail and the &lt;a href=&quot;https://trailbus.com/&quot;&gt;trail bus&lt;/a&gt; will drop you off at them.&lt;/p&gt;

&lt;h3 id=&quot;getting-there&quot;&gt;Getting there&lt;/h3&gt;

&lt;p&gt;Just a note that, with one brief exception on the way back &lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, I got there and back without using a car, from North Vancouver. So that meant a bus, a bus, a ferry (seabus), a train (the skytrain) to Bridgeport station, a bus, a ferry (BC ferries) and a bus to get to downtown Victoria. Then I stayed the night at a hotel &lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; and took the &lt;a href=&quot;https://trailbus.com/&quot;&gt;trail bus&lt;/a&gt; in the morning.&lt;/p&gt;

&lt;p&gt;It took about 2.5 hours to get to the ferry terminal. It takes an hour by car, plus all the waiting around, so that really surprised at how fast, easy and cheap it was.&lt;/p&gt;

&lt;p&gt;Cycling there was something I considered, but riding from North Vancouver to the ferry terminal is horrendous and dangerous on the best of days.&lt;/p&gt;

&lt;p&gt;Total cost: $2.50 (transit in Victoria), $4.45 (two zones on translink), $19.20 (bc ferry), $50 (trail bus)&lt;/p&gt;

&lt;p&gt;The trail bus is the expensive part of the whole trip, if you‚Äôve got more people and vehicle, the cost of the trail bus can quickly outweigh the cost of the ferry.&lt;/p&gt;

&lt;h3 id=&quot;day-1-china-beach-to-chin-beach&quot;&gt;Day 1: China beach to Chin beach&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Distance:&lt;/strong&gt; 19.39km&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Time:&lt;/strong&gt; 8h 08m&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Elevation:&lt;/strong&gt; 988m up üìà and the same down üìâ&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;strava-embed-placeholder&quot; data-embed-type=&quot;activity&quot; data-embed-id=&quot;9229033558&quot;&gt;&lt;/div&gt;
&lt;script src=&quot;https://strava-embeds.com/embed.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Perhaps one of the more confusing naming schemes out there, but this was China beach to Chin beach. The trail bus dropped me off at around 8:30 and after a quick repack, I took off for the first campsite, 9km north along the trail. The weather was just great for this day, nice and sunny with a light breeze coming off the sea.&lt;/p&gt;

&lt;p&gt;The trail follows the coast and so you get the absolute delight that is the west coast, mild temperatures, lovely beaches and so on. I hit the first campsite, 9km in at about 11am or so, which is way to early to camp. At that point I decided to just press on the next 11km - knowing that the next 11km was some of the hardest on the trail.&lt;/p&gt;

&lt;p&gt;I would have settled for a campsite earlier than Chin beach, at 21km (according to the map &lt;sup id=&quot;fnref:3&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;), the last few km were a hard push. The terrain is just continuously steep up and down as the trail goes up and down each creek. I gained almost 1000m, but ended up at sea level. The terrain is steep and also dry and dusty and technical to walk up and down.&lt;/p&gt;

&lt;p&gt;Every campsite has tent pads, which for people with hiking pole tents, like me, not ideal. Fortunately that first night I found a lovely pad free spot with a good place for my hammock on the beach. I was very happy and tired.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/files/IMG_0191.JPG&quot; width=&quot;400px&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;day-2-chin-beach-to-little-kuitsche-creek&quot;&gt;Day 2: Chin beach to Little Kuitsche Creek&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Distance:&lt;/strong&gt; 11.70km&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Time:&lt;/strong&gt; 5h 07m&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Elevation:&lt;/strong&gt; 552 up üìà and the same down üìâ&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;strava-embed-placeholder&quot; data-embed-type=&quot;activity&quot; data-embed-id=&quot;9229033403&quot;&gt;&lt;/div&gt;

&lt;p&gt;On day two, I noticed that I‚Äôd overdone it on day one and I had a slow and sluggish start to the day, but was still able to press on and glad when I finished. This day was easier than yesterday, mostly. It still starts off tough with lots of up and down and then a reasonable sized (200m) hill.&lt;/p&gt;

&lt;p&gt;Then you come out on to the glorious Sombrio beach, complete with a waterfall falling onto the beach, a whale feeding and quite a lot of people. Sombrio beach is also a trail head, with road access so there‚Äôs quite a lot of people which is a bit of a shame. But a few km either way from the beach and it predictably thins out again.&lt;/p&gt;

&lt;p&gt;The campsite is not a beach campsite, its up in the trees. Water access is close, but down a hill that‚Äôs under construction and I found a bit of a challenge in my flip flops. Time to give up on flip flops as camp shoes and go for something more rugged. A super sunny day with hiking on the beach, fantastic.&lt;/p&gt;

&lt;h3 id=&quot;day-3-little-kuitsche-creek-to-port-renfrew&quot;&gt;Day 3: Little Kuitsche Creek to Port Renfrew&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Distance:&lt;/strong&gt; 16.51km&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Time:&lt;/strong&gt; 5h 05m&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Elevation:&lt;/strong&gt; 481 up üìà and the same down üìâ&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;strava-embed-placeholder&quot; data-embed-type=&quot;activity&quot; data-embed-id=&quot;9229038107&quot;&gt;&lt;/div&gt;

&lt;p&gt;This is the easiest part of the trail, but is still lots of steep up and down. There were actually a few more flat bits on this one, which was nice. It turns out, that most people doing the trail aim for four days of hiking (I combined the first two days into one by going straight to Chin beach) so that meant I kept seeing the same people on the trail and campsites, which was nice.&lt;/p&gt;

&lt;p&gt;The weather was overcast, with bright spots in the afternoon, a lovely west coast day. Once you hit Botanical Beach, it‚Äôs really easy and flat with wide trails and lots of people. I did a hike around Botany Bay and then had to hike the 4km or so into town on road. After all that up and down, that was a nice break.&lt;/p&gt;

&lt;p&gt;A few beers and a veggie burger in the pub at the end of the road, and I was ready to hop in the trail bus and repeat my trip home.&lt;/p&gt;

&lt;h3 id=&quot;notes&quot;&gt;Notes&lt;/h3&gt;

&lt;p&gt;We‚Äôve had a very hot, dry spring so far and so there were muddy parts on the trail, but they were few and far between. There was much less mud than on the West Coast Trail which I did &lt;a href=&quot;https://mckay.pub/2022-06-25-west-coast-trail/&quot;&gt;mid-June 2022&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Everyone is going to compare this to the West Coast Trail, because it‚Äôs right there. In comparison, the Juan de Fuca trail is:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;More steep elevation changes, but no ladders.&lt;/li&gt;
  &lt;li&gt;Less muddy, but that might have been due to weather.&lt;/li&gt;
  &lt;li&gt;Shorter, but more access points.&lt;/li&gt;
  &lt;li&gt;Less beach walking and much, much more forest walking.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The main difference is beaches, once you‚Äôve got past Walbran Creek (if you are heading north), then you‚Äôll find lots and lots of beach and flat hiking. That‚Äôs because as you go further north, the coast is no longer protected by the Olympic peninsula and over the millennia, waves crashing in off the Pacific have created fantastic beaches to explore.&lt;/p&gt;

&lt;p&gt;This marked the end of my boots. I bought Scarpa boots last year and they have completely fallen apart. There were holes all the way through both sides, at the end of each beach I had to stop and empty the beach out of my boots. A post about my new boots soon.&lt;/p&gt;

&lt;p&gt;This was also my first trip with 100% homemade meals, they worked pretty well and helped me save money without having to buy expensive pre-made dehydrated meals. Will post about that soon also.&lt;/p&gt;

&lt;p&gt;Getting there and back without a car was cool and would recommend it.&lt;/p&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;My friend who was kind enough to give me a bed for the night on the way back, drove me home from the bus stop. Next morning I walked back to the bus and continued that way.¬†&lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;The bus leaves at 6:45am and so I wanted a hotel downtown to make it easy to get to.¬†&lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:3&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;My GPS and the trail signs did not agree and were always a couple of km out.¬†&lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</content>
</entry>

<entry>
<title>Trip report - Stein Valley</title>
<link href="https://mckay.pub/2023-06-19-stein-valley/"/>
<updated>2023-06-19T00:00:00+00:00</updated>
<id>https://mckay.pub/stein-valley</id>
<content type="html">&lt;p&gt;May in Vancouver means that many mountains are still covered in snow and its not good snow. Layers of mucky half melted snow and ice that‚Äôs hard to walk on, with repeated fall throughs and such. Other places tend to be not quite warm enough yet, so my friend and I kick started our backpacking with &lt;a href=&quot;https://bcparks.ca/explore/parkpgs/stein_val/&quot;&gt;a trip to the Stein&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Again, the main reason for doing the Stein in May is that it‚Äôs really warm. Like hot. It‚Äôs way too hot to do in the summer. With temperatures in May around 30c, it‚Äôs amazing. Once you get into the trees, by that raging river, it‚Äôs somewhere special.&lt;/p&gt;

&lt;p&gt;We went there in &lt;a href=&quot;https://mckay.pub/2022-06-25-stein-valley/&quot;&gt;June last year&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;day-one-heading-into-the-stein&quot;&gt;Day one: Heading into the Stein&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Distance:&lt;/strong&gt; 8.58km&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Time:&lt;/strong&gt; 3h 35m&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Elevation:&lt;/strong&gt; 303m&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;strava-embed-placeholder&quot; data-embed-type=&quot;activity&quot; data-embed-id=&quot;9109569545&quot;&gt;&lt;/div&gt;

&lt;p&gt;The downside of going at this time of year is that the spring melt is in full swing. The quick rapid rise in temperature caused a lot of melt and once again we had to take the pipeline bridge across into the valley.&lt;/p&gt;

&lt;p&gt;Once again the heat and lack of shade for that 4km until you get into the Stein valley properly is quite intense and something that really drained us. This year we were carrying much &lt;a href=&quot;https://mckay.pub/2022-06-25-packing-light/&quot;&gt;smaller and lighter backpacks fortunately&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Again we camped at Devils Staircase campground, again with no-one else there. Last year we tried heading further north into the Stein, but hit a problem 1km north with a gully that was badly washed out that I just couldn‚Äôt cross. This year I went on ahead and it was much more doable - so we knew were good to go for the next day and head further into the Stein.&lt;/p&gt;

&lt;h3 id=&quot;day-two-devils-staircase-to-the-suspension-bridge&quot;&gt;Day two: Devils Staircase to the Suspension bridge&lt;/h3&gt;

&lt;div class=&quot;strava-embed-placeholder&quot; data-embed-type=&quot;activity&quot; data-embed-id=&quot;9116469041&quot;&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Distance:&lt;/strong&gt; 19.58km&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Time:&lt;/strong&gt; 7h 38m&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Elevation:&lt;/strong&gt; 617m&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I‚Äôve always wanted to get as far up the Stein Valley as I could, but something always prevented this. So with the goal in mind of getting to the suspension bridge we consolidated into one light backpack with suitable supplies and head off to the suspension bridge, 20km up the valley.&lt;/p&gt;

&lt;p&gt;This was a wonderful day of hiking with light backpacks and exploring parts of the valley I‚Äôd never visited before. There were parts of this valley that were just fabulous.&lt;/p&gt;

&lt;p&gt;We saw this beauty in a tree, we think its a &lt;a href=&quot;https://en.wikipedia.org/wiki/Pacific_marten&quot;&gt;Pacific Marten&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/files/pacific-marten-1.png&quot; width=&quot;400px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/files/pacific-marten-2.png&quot; width=&quot;400px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;At the top there are a few washouts that resulted in a bit of treacherous scrambling, but nothing too bad.&lt;/p&gt;

&lt;p&gt;We then reached the suspension bridge and that‚Äôs as far as you can go since its closed from beyond there as a result of damage in the 2021 floods (&lt;a href=&quot;https://bcparks.ca/stein-valley-nlakapamux-heritage-park/&quot;&gt;as per the website&lt;/a&gt;). I‚Äôm not sure if it will ever open again, but if it does the Stein Traverse is still high on my bucket list.&lt;/p&gt;

&lt;p&gt;We returned back to the Devils Staircase campground and found we were joined by a couple of other campers for the night.&lt;/p&gt;

&lt;h3 id=&quot;day-three-leaving-the-stein&quot;&gt;Day three: Leaving the Stein&lt;/h3&gt;

&lt;div class=&quot;strava-embed-placeholder&quot; data-embed-type=&quot;activity&quot; data-embed-id=&quot;9120298291&quot;&gt;&lt;/div&gt;
&lt;script src=&quot;https://strava-embeds.com/embed.js&quot;&gt;&lt;/script&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Distance:&lt;/strong&gt; 7.94km&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Time:&lt;/strong&gt; 2h 19m&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Elevation:&lt;/strong&gt; 263m&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;On the last day, we woke up to a little bit of moisture in the air. There were even a couple of raindrops. The valley just became green and alive and vibrant, such a change from the heat beaten land before.&lt;/p&gt;

&lt;p&gt;Light backpacks and just 6c weather made for a nice hike back out of the valley, across the bridge and back to the car. It only took just over 2 hours to complete. In comparison, last year when we did this in what felt like blazing heat took 3.5 hours, with lots of stopping.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;The Stein has become our first trip of year and we‚Äôll probably do it again next year. I know I‚Äôll be spending the long winter months looking forward to it.&lt;/p&gt;
</content>
</entry>

<entry>
<title>Service catalog - Timezone support</title>
<link href="https://mckay.pub/2023-05-26-timezone-support/"/>
<updated>2023-05-26T00:00:00+00:00</updated>
<id>https://mckay.pub/timezone-support</id>
<content type="html">&lt;p&gt;When you are in an incident that‚Äôs causing impact to your customers, you‚Äôll be looking at data in multiple sources. From events on GitHub, messages on Slack, logs in Splunk, graphs in Datadog and on and on. At the time of an incident there‚Äôs a lot going on and one thing that always caused a bit more cognitive stress for me was calculating when everything happened. To add to this, you might be working with people who are in diverse time zones. Most services (thank goodness) these days log in UTC and the service catalog is no exception, logging things in UTC.&lt;/p&gt;

&lt;p&gt;To make life just that bit easier, the &lt;a href=&quot;https://github.com/clearwind-ca/service-catalog/releases/tag/0.1.3&quot;&gt;service catalog now allows you to set a timezone&lt;/a&gt; and whenever you see a date, you‚Äôll see it 3 different ways:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;The time relative to now&lt;/li&gt;
  &lt;li&gt;The time in UTC&lt;/li&gt;
  &lt;li&gt;The time in your timezone&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Here‚Äôs an example:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/files/service-catalog-times.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This may seem like a small thing, but this, along with the little &lt;code&gt;copy to clipboard&lt;/code&gt; make it easier to communicate and understand what happened. Since the service catalog can capture important arbitrary events, such as deployments, migrations, releases, feature flag changes in catalog events, it‚Äôs easy to establish a timeline of what happened.&lt;/p&gt;

&lt;p&gt;It‚Äôs been a while since I‚Äôve done Django and this was a good learning experience through the timezone support which has been added over the years, and as usual was done really well. There‚Äôs a few things I‚Äôm going to highlight that I thought were good, but this document &lt;a href=&quot;https://docs.djangoproject.com/en/4.2/topics/i18n/timezones/&quot;&gt;covers all the basics&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;settings&quot;&gt;Settings&lt;/h3&gt;

&lt;p&gt;You should have &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TIME_ZONE&lt;/code&gt; set to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UTC&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;USE_TZ&lt;/code&gt; set to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;True&lt;/code&gt;. I‚Äôve worked on projects where the timestamp in the database is not in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UTC&lt;/code&gt; and it just made me cry. Just leave this as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UTC&lt;/code&gt; and never change it. There is only one timezone that data should ever be stored and it should always be &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UTC&lt;/code&gt;. Just don‚Äôt change that.&lt;/p&gt;

&lt;h3 id=&quot;letting-users-pick-a-timezone&quot;&gt;Letting users pick a timezone&lt;/h3&gt;

&lt;p&gt;You‚Äôll probably have to make a &lt;a href=&quot;https://docs.djangoproject.com/en/4.2/topics/auth/customizing/#extending-the-existing-user-model&quot;&gt;user profile&lt;/a&gt; you ask the user for their timezone and then attach it to the user. The service catalog is tightly coupled to GitHub. In GitHub you also get to specify your timezone, but the &lt;a href=&quot;https://docs.github.com/en/rest/users/users?apiVersion=2022-11-28#get-the-authenticated-user&quot;&gt;REST API&lt;/a&gt; doesn‚Äôt include this information &lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;

&lt;p&gt;If you are looking for a list of all the timezones, then the &lt;a href=&quot;https://docs.python.org/3/library/zoneinfo.html&quot;&gt;zoneinfo&amp;lt;/apy&amp;gt; package has you covered, no need to use &lt;a href=&quot;https://pypi.org/project/pytz/&quot;&gt;pytz&lt;/a&gt; anymore.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;With a model like this:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;zones&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sorted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zoneinfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;available_timezones&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Profile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TIMEZONE_CHOICES&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zones&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zones&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;OneToOneField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;on_delete&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CASCADE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;timezone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;CharField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;choices&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TIMEZONE_CHOICES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;UTC&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You‚Äôll quickly have a nice form for the users.&lt;/p&gt;

&lt;h3 id=&quot;using-that-timezone&quot;&gt;Using that timezone&lt;/h3&gt;

&lt;p&gt;Again, as noted in that document, you‚Äôll want to activate the timezone for that user as they hit the site.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TimezoneMiddleware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get_response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get_response&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__call__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;tzname&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;tz&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tzname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;tzname&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;profile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timezone&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;except &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;AttributeError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;pass&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;# You&apos;ve got settings.TIME_ZONE set to &quot;UTC&quot; right? So that becomes the default.
&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;tzname&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tzname&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;settings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TIME_ZONE&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;timezone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;activate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zoneinfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ZoneInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tzname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;# Stuff into the session for the next request.
&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;tz&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tzname&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get_response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is a pretty simplified middleware that activates the timezone and stuffs it in the session. So what‚Äôs this going to do?&lt;/p&gt;

&lt;p&gt;The date and time will be stored in the database as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UTC&lt;/code&gt; as nature intended. But whenever it‚Äôs shown to a user, it will be translated into their timezone. When you have a form, users enter the date and time in their timezone and Django stores it as UTC. This is pretty much exactly what you want in a web site.&lt;/p&gt;

&lt;h3 id=&quot;gotchas&quot;&gt;Gotchas&lt;/h3&gt;

&lt;p&gt;To show the date in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UTC&lt;/code&gt; in a template, I used the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;utc&lt;/code&gt; filter. You can also use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{% timezone None %}&lt;/code&gt; (as &lt;a href=&quot;https://docs.djangoproject.com/en/4.2/topics/i18n/timezones/&quot;&gt;documented&lt;/a&gt;) or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;localtime&lt;/code&gt;. Otherwise Django was being smart and trying to convert into the timezone for me.&lt;/p&gt;

&lt;p&gt;A model has &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;default=datetime.now&lt;/code&gt; on it, meaning a HTML form defaulted to showing the time in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UTC&lt;/code&gt;. This was simple to fix in the view, because when the view was being called, the middleware (see above) had been called, allowing us to know the users timezone. So then in the view, I simply switched to the users timezone:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        &lt;span class=&quot;n&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;EventForm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;initial&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timezone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;All this is well and good for the web interface, but what about the API? API‚Äôs should always be in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UTC&lt;/code&gt; and again that‚Äôs something non-negotiable in my opinion. In the middleware, if the request is coming into an API endpoint (it‚Äôs using Django Rest Framework) then the timezone just remains as UTC.&lt;/p&gt;

&lt;h3 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h3&gt;

&lt;p&gt;That‚Äôs it, nothing to revolutionary in this post, but just a pile of stuff that‚Äôs builtin to Django and just gets it right in my opinion.&lt;/p&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;I couldn‚Äôt spot it in GraphQL either, sometimes the two aren‚Äôt in sync so it might be there, couldn‚Äôt find it though.¬†&lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</content>
</entry>

<entry>
<title>Service catalog - Using Actions</title>
<link href="https://mckay.pub/2023-05-18-using-actions/"/>
<updated>2023-05-18T00:00:00+00:00</updated>
<id>https://mckay.pub/using-actions</id>
<content type="html">&lt;p&gt;As part of the &lt;a href=&quot;https://github.com/clearwind-ca/service-catalog&quot;&gt;service catalog&lt;/a&gt; (see &lt;a href=&quot;https://mckay.pub/2023-05-15-service-catalog/&quot;&gt;announcement&lt;/a&gt;) we want to be able to measure the ‚Äúquality or readiness‚Äù of a service.&lt;/p&gt;

&lt;p&gt;Quality or readiness of a service tends to be different from code quality, although they might be overlap. Ideas of readiness could include:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Does the team specify a place for bugs or feedback?&lt;/li&gt;
  &lt;li&gt;Does the team specify an on-call rotation?&lt;/li&gt;
  &lt;li&gt;Is the team keeping on top of security issues?&lt;/li&gt;
  &lt;li&gt;Is the service meeting legal obligations or compliance?&lt;/li&gt;
  &lt;li&gt;Is the service vulnerable to urgent security problems?&lt;/li&gt;
  &lt;li&gt;Does the team have appropriate metrics and dashboard?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;These questions and more are defined by the organization and different for every organization. Trying to code all those situations and questions is not within the service catalog‚Äôs goal.&lt;/p&gt;

&lt;p&gt;So we need to find a way to allow customers to be able to create and code health checks, while avoiding running arbitrary code in the service catalog &lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. For this, GitHub Actions came to the rescue.&lt;/p&gt;

&lt;p&gt;So let‚Äôs take an example, scanning all our services to ensure no one is vulnerable to the &lt;a href=&quot;https://nvd.nist.gov/vuln/detail/CVE-2021-44228&quot;&gt;Log4J vulnerability&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In the service catalog we create a health check for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Log4J&lt;/code&gt;. The service catalog will send a &lt;a href=&quot;https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#repository_dispatch&quot;&gt;repository_dispatch&lt;/a&gt; on a schedule defined in the catalog for this check.&lt;/p&gt;

&lt;p&gt;In GitHub we‚Äôll write an Action to grab the repository, scan it and send the result back to the catalog.&lt;/p&gt;

&lt;p&gt;Here‚Äôs how that Action would look:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
  log4j:
    env:
      # We&apos;ll need this to write back to the catalog.
      SERVICE_CATALOG_TOKEN: ${{ secrets.SERVICE_CATALOG_TOKEN }}
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
      with:
        # Grab the repository for the service that the catalog has sent to us.
        repository: ${{ github.event.client_payload.repository }}
    - run: |
        # Grab a log4jscanner.
        wget https://github.com/google/log4jscanner/releases/download/v0.5.0/log4jscanner-v0.5.0-linux-amd64.tar.gz
        tar -zxf log4jscanner-v0.5.0-linux-amd64.tar.gz
        cd log4jscanner
        ./log4jscanner $GITHUB_WORKSPACE &amp;gt;&amp;gt; /tmp/log4j.results
        
        # Write some annotations in the Action log and a JSON file
        # ready to send back to the catalog.
        if test -s &quot;/tmp/log4j.results&quot;; then
          contents=$(cat /tmp/log4j.results)
          echo &quot;::error::Vulnerable files found&quot;
          printf &apos;{&quot;result&quot;: &quot;fail&quot;, &quot;message&quot;: &quot;Vulnerable file(s) found: `%s`&quot;}&apos; $contents &amp;gt;&amp;gt; /tmp/service-catalog-result.json
        else
          echo &quot;::notice::All good, no vulnerable files found&quot;
          printf &apos;{&quot;result&quot;: &quot;pass&quot;}&apos; &amp;gt;&amp;gt; /tmp/service-catalog-result.json
        fi
        echo `cat /tmp/service-catalog-result.json`

    # Send the result back
    - uses: clearwind-ca/send-result@main

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Most of this code is running the log4j scanner and finding the vulnerable files. At the end there‚Äôs a simple Action &lt;a href=&quot;github.com/clearwind-ca/send-result&quot;&gt;clearwind-ca/send-result&lt;/a&gt; that sends the results to the catalog.&lt;/p&gt;

&lt;p&gt;Here‚Äôs a little chart:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ Service        ‚îÇ
  ‚îÇ                ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
                              ‚îÇ
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ Health check   ‚îÇ   ‚îÇ Health check   ‚îÇ Dispatch   ‚îÇ GitHub Action     ‚îÇ
  ‚îÇ                ‚óÑ‚îÄ‚îÄ‚îÄ‚î§ Result         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫                   ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ≤‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ                             ‚îÇ
                              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                    Pass, fail response
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The great parts about this approach are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Grabbing and running arbitrary code is now sandboxed with GitHub Actions.&lt;/li&gt;
  &lt;li&gt;The code and information about the code is on GitHub anyway (issue, repositories etc) so doing the work on GitHub makes sense.&lt;/li&gt;
  &lt;li&gt;GitHub Actions have great secret management, so you can store secrets for other services. That allows you to query other services like Slack, Pager Duty and so on.&lt;/li&gt;
  &lt;li&gt;There are thousands of &lt;a href=&quot;https://github.com/marketplace?category=&amp;amp;query=&amp;amp;type=actions&amp;amp;verification=&quot;&gt;re-usable Actions within the GitHub Marketplace&lt;/a&gt; that we can use to do these checks.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Using Actions this way gives customers the chance to build these checks quickly and simply in Actions. Separation of concerns, allows us to focus on building the best thing in the catalog. And finally, don‚Äôt want to use Actions? That‚Äôs cool, there‚Äôs an API for the catalog that let‚Äôs you go down a different path if you like.&lt;/p&gt;

&lt;p&gt;‚Äì&lt;/p&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;We could also do this by allowing custom code to be run in the catalog, however this has its own share of problems. Access to repositories, secret management, resource utilization, ease of upgrades and so on. Better to use an external service.¬†&lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</content>
</entry>

<entry>
<title>Service catalog</title>
<link href="https://mckay.pub/2023-05-15-service-catalog/"/>
<updated>2023-05-15T00:00:00+00:00</updated>
<id>https://mckay.pub/service-catalog</id>
<content type="html">&lt;p&gt;When I joined the on-call rotation at GitHub as we &lt;a href=&quot;https://docs.github.com/en/actions&quot;&gt;launched GitHub Actions&lt;/a&gt;, being on-call was something that was pretty new to me. I learnt a lot and had some amazing experienced colleagues who taught me a lot and there‚Äôs still so much to learn.&lt;/p&gt;

&lt;p&gt;At one point GitHub had over 500 developers working &lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; on the site and all the parts, spread out across the globe. It also interacted with teams at other companies, such as Microsoft and the Azure teams.&lt;/p&gt;

&lt;p&gt;Navigating and understanding your services, teams and dashboards in an organization is hard, it was at GitHub. Repeatedly I‚Äôve spoken to organizations building tooling to solve this internally.&lt;/p&gt;

&lt;p&gt;Some of the problems you might have in your engineering organization üëá&lt;/p&gt;

&lt;h3 id=&quot;navigating-your-engineering-services&quot;&gt;Navigating your engineering services&lt;/h3&gt;

&lt;p&gt;As the size, speed and scale of your organization grows just navigating the teams grows harder. New people who join the company can struggle to find who does what and what‚Äôs important. Veterans struggle to keep up with changes.&lt;/p&gt;

&lt;p&gt;What do those teams do? Who‚Äôs on the teams? Where do they hang out and communicate? What dashboards do they have?&lt;/p&gt;

&lt;p&gt;If your answer is a document somewhere, a wiki, or so-on. The moment those documents are finished they are out of date.&lt;/p&gt;

&lt;h3 id=&quot;quality-of-your-services&quot;&gt;Quality of your services&lt;/h3&gt;

&lt;p&gt;So you‚Äôve got a series of services that make up your product. Those will be spread out across the organisation with different ideas and leaders. Spreading ideas and information out across those services and teams is hard.&lt;/p&gt;

&lt;p&gt;Tools like Datadog, Splunk etc, are available to crunch all the run time information and provide you with good information about how users are using your service.&lt;/p&gt;

&lt;p&gt;But there are other metrics and measurements within an organisation that you need to make sure are kept up to date. How many security issues are there on the service? Are they being dealt with quickly? Are legal requirements satisified? Is the team within compliance? Has the team got on-call rotation setup?&lt;/p&gt;

&lt;p&gt;In a large organization you want to ensure that teams are meeting their goals before incidents happen.&lt;/p&gt;

&lt;h3 id=&quot;how-do-we-fix-a-problem&quot;&gt;How do we fix a problem?&lt;/h3&gt;

&lt;p&gt;Most of the time when an incident happened at GitHub we‚Äôd go through a progression that looked like this, in roughly this order:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;What just got deployed?&lt;/li&gt;
  &lt;li&gt;What got migrated or transitioned?&lt;/li&gt;
  &lt;li&gt;What just got turned on or off?&lt;/li&gt;
  &lt;li&gt;What external services we depend on are having problems?&lt;/li&gt;
  &lt;li&gt;What are users doing to the site?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In an incident you need concise and clear information as soon as you can to reduce your time to mitigation. Cognitive overload and lack of clarity in an incident slows everything down.&lt;/p&gt;

&lt;p&gt;Even just knowing the key deployments and releases over the last hour and then the correct teams to contact - reduces the time to mitigate incidents the majority of the time.&lt;/p&gt;

&lt;h3 id=&quot;service-catalog-release&quot;&gt;Service catalog release&lt;/h3&gt;

&lt;p&gt;Over the last while I‚Äôve been building a tool to do these things. The service catalog is tightly integrated into GitHub and GitHub Actions. Best of all, it‚Äôs free, open source and available for anyone to use straightaway.&lt;/p&gt;

&lt;p&gt;Check it out here üëâ &lt;a href=&quot;https://github.com/clearwind-ca/service-catalog&quot;&gt;https://github.com/clearwind-ca/service-catalog&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/files/catalog-services-may-15.png&quot; width=&quot;500px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Watch this space for some more articles about it and if you are interested in using this, &lt;a href=&quot;https://clearwind.ca/&quot;&gt;drop me a line&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;‚Äì&lt;/p&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;This is an estimate, I don‚Äôt have the numbers and can‚Äôt remember the exact number ü§∑‚Äç‚ôÇ¬†&lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</content>
</entry>

<entry>
<title>Trespassing in the US</title>
<link href="https://mckay.pub/2023-04-20-wild-camping-in-us/"/>
<updated>2023-04-20T00:00:00+00:00</updated>
<id>https://mckay.pub/wild-camping-in-us</id>
<content type="html">&lt;p&gt;I‚Äôve been doing more back and bike packing in the last year, often solo. Get all your gear, point in a direction and go for days and days. Unfortunately when you do this life isn‚Äôt always predictable, you aren‚Äôt 100% sure how far you‚Äôll walk or cycle that day, if anything will go wrong, if weather will change and so on. So in a pinch you might need to camp somewhere remote. Or perhaps you get lost and end up in private property.&lt;/p&gt;

&lt;p&gt;Last year I was in Maui with my camping gear and had a wonderful time. You can camp on the beach legally in Hawaii, I looked at internet forums about ‚Äúwild camping‚Äù, where you just put your tent down out of the way. In other parts of the world, this is wild camping. But when I rode past those areas it looked very, very sketchy. Everywhere else had big ‚Äúprivate property‚Äù signs all over the place. You don‚Äôt realise until you go to the rest of the world, how much of the US is private property and how nerve wracking it feels to go places where you aren‚Äôt sure if something is private property or not.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;files/private-property.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;In Canada, UK, Scandinavia, France, Italy, Austria etc, where I‚Äôve done travels this has never worried me anywhere near as much. Ever. The UK is special because, yes a lot of land is private, but the &lt;a href=&quot;https://99percentinvisible.org/episode/katie-mingles-right-to-roam/&quot;&gt;right to roam&lt;/a&gt; gives you the chance to hike on that land.&lt;/p&gt;

&lt;p&gt;In a pinch when I‚Äôve ended up in the wrong place in a UK, someone has come and spoken to me nicely. I‚Äôve done it Canada and people were helpful.&lt;/p&gt;

&lt;p&gt;However, the US strongly enforces trespassing laws‚Ä¶ and there are so many guns. It‚Äôs just terrifying.&lt;/p&gt;

&lt;p&gt;In 2005 &lt;a href=&quot;https://www.bbc.com/news/world-us-canada-65282084&quot;&gt;stand your ground&lt;/a&gt; laws were introduced which are in effect in 28 states.&lt;/p&gt;

&lt;p&gt;It turns out that ‚Äú&lt;a href=&quot;https://www.findlaw.com/legalblogs/law-and-life/is-it-ever-legal-to-shoot-trespassers/&quot;&gt;shooting at a trespasser is always a legal gamble&lt;/a&gt;‚Äù. A gamble, what the fuck?&lt;/p&gt;

&lt;p&gt;This week there‚Äôs been a series of terrible shootings in the US that reminded me of&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;‚ÄúAccused of shooting a 6-year-old neighbor and her parents in North Carolina after a basketball rolled into his yard‚Äù &lt;a href=&quot;https://www.cnn.com/2023/04/20/us/neighbor-child-shooting-basketball-singletary/index.html&quot;&gt;Source&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;‚ÄúBlack teen shot at doorstep after ringing wrong doorbell‚Äù &lt;a href=&quot;https://www.bbc.com/news/world-us-canada-65299127&quot;&gt;Source&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;‚ÄúTwo Texas cheerleaders shot after one gets into wrong car‚Äù &lt;a href=&quot;https://www.bbc.com/news/world-us-canada-65330696&quot;&gt;Source&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;‚ÄúWoman shot dead in New York state after friend pulled into wrong driveway‚Äù &lt;a href=&quot;https://www.bbc.com/news/world-us-canada-65307556&quot;&gt;Source&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;‚ÄúWhy are Americans being shot for knocking on the wrong door?‚Äù &lt;a href=&quot;https://www.theguardian.com/commentisfree/2023/apr/19/why-are-americans-being-shot-for-knocking-on-the-wrong-door&quot;&gt;Source&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;None of these are backpackers, struggling out in the wilderness, but it just doesn‚Äôt seem worth it. It‚Äôs stressful enough holidaying in the US knowing the number of gun deaths, possible bankruptcy due to medical problems, and the oversized trucks means I‚Äôm more likely to be killed on my bicycle.&lt;/p&gt;

&lt;p&gt;Hawaii was nice and I would go back, but I‚Äôm unlikely to be going anywhere else by bike or foot in the US for while. Instead, there are so many other beautiful parts of the world to go.&lt;/p&gt;
</content>
</entry>

<entry>
<title>What I'm up to</title>
<link href="https://mckay.pub/2023-04-17-what-im-up-to/"/>
<updated>2023-04-17T00:00:00+00:00</updated>
<id>https://mckay.pub/what-im-up-to</id>
<content type="html">&lt;p&gt;Following up on my &lt;a href=&quot;https://mckay.pub/2023-02-03-whats-next/&quot;&gt;what‚Äôs next&lt;/a&gt; I wanted to post a little about what I have been doing.&lt;/p&gt;

&lt;h2 id=&quot;actions-analyser&quot;&gt;Actions Analyser&lt;/h2&gt;

&lt;p&gt;This is a &lt;a href=&quot;https://analyser.clearwind.ca/&quot;&gt;hosted way to dive into your Actions billing reports&lt;/a&gt; and find out some important infomation like:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;which repository in my organisation is consuming the most minutes&lt;/li&gt;
  &lt;li&gt;which workflow within a repository is consuming the most minutes&lt;/li&gt;
  &lt;li&gt;whats the change month over month&lt;/li&gt;
  &lt;li&gt;variability in billings of workflows&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;It‚Äôs completely free, you should check it out if you get an Actions bill and aren‚Äôt sure where the money is going.&lt;/p&gt;

&lt;h2 id=&quot;service-catalog&quot;&gt;Service Catalog&lt;/h2&gt;

&lt;p&gt;This is an &lt;a href=&quot;https://github.com/clearwind-ca/service-catalog&quot;&gt;open source project&lt;/a&gt; to provide a way to track teams, applications and tools across an organisation. A similar tool was used a lot at GitHub and was being built at Vercel when I was there.&lt;/p&gt;

&lt;p&gt;Combined with things like &lt;a href=&quot;https://github.com/andymckay/service-status-cli&quot;&gt;service status cli&lt;/a&gt;, my goal is to provide tooling to make services more robust and transparent when they go wrong.&lt;/p&gt;

&lt;p&gt;Lots to do here before we can hit anything like an initial release, but it‚Äôs a fun project so far.&lt;/p&gt;

&lt;h2 id=&quot;contracting&quot;&gt;Contracting&lt;/h2&gt;

&lt;p&gt;I‚Äôve gotten back into &lt;a href=&quot;https://clearwind.ca&quot;&gt;contracting&lt;/a&gt; with my first project for an awesome local client in a very long time. It‚Äôs converting Excel spreadsheets for some business needs and doing it all in the browser. I‚Äôll write up a blog post on that soon, but doing it client side in the browser has been such a win for this project.&lt;/p&gt;

&lt;p&gt;I‚Äôm open to more contracting or consulting opportunities, so if you know of any, please &lt;a href=&quot;mailto:andy@mckay.pub&quot;&gt;let me know&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;beyond-cars&quot;&gt;Beyond cars&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://beyondcars.ca/&quot;&gt;Beyond cars is a blog to advocate for cycling&lt;/a&gt;, mostly focused on BC. But hopefully relevant everywhere. This has been fun, there‚Äôs so much to write on the subject and my list of things to write about is bigger than I can keep up with.&lt;/p&gt;

&lt;h2 id=&quot;overall&quot;&gt;Overall&lt;/h2&gt;

&lt;p&gt;A few months into this new phase of life, I‚Äôm enjoying things but realise that a lot of things have changed since I last did this. Back then I was heavily involved in Plone, Django and Python communities. The result was I received lots of contracts, opportunities and connections.&lt;/p&gt;

&lt;p&gt;At the moment I feel quite disconnected from those communities and hence oppportunities. This is something I‚Äôm going to have to work on.&lt;/p&gt;
</content>
</entry>

<entry>
<title>Number of curling clubs by Vancouver municipality</title>
<link href="https://mckay.pub/2023-03-03-curling-clubs/"/>
<updated>2023-03-03T00:00:00+00:00</updated>
<id>https://mckay.pub/curling-clubs</id>
<content type="html">&lt;p&gt;Since curlers were kicked out of the North Shore Winter Club, there are no curling facilities on the North Shore of Vancouver. Currently we have to travel to New Westminster to go curling. Here‚Äôs a list of municipalities in Vancouver, population and number of curling clubs.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Member&lt;/th&gt;
      &lt;th&gt;Population (2021)&lt;/th&gt;
      &lt;th&gt;Curling Clubs&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Vancouver&lt;/td&gt;
      &lt;td&gt;662,248&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Surrey&lt;/td&gt;
      &lt;td&gt;568,322&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Burnaby&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;&lt;strong&gt;249,125&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;&lt;strong&gt;0&lt;/strong&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Richmond&lt;/td&gt;
      &lt;td&gt;209,937&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Coquitlam&lt;/td&gt;
      &lt;td&gt;148,625&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Township of Langley&lt;/td&gt;
      &lt;td&gt;132,603&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Delta&lt;/td&gt;
      &lt;td&gt;108,455&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Maple Ridge&lt;/td&gt;
      &lt;td&gt;90,990&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;District of North Vancouver&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;&lt;strong&gt;88,168&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;&lt;strong&gt;0&lt;/strong&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;New Westminster&lt;/td&gt;
      &lt;td&gt;78,916&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Port Coquitlam&lt;/td&gt;
      &lt;td&gt;61,498&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;City of North Vancouver&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;&lt;strong&gt;58,120&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;&lt;strong&gt;0&lt;/strong&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;West Vancouver&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;&lt;strong&gt;44,122&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;&lt;strong&gt;0&lt;/strong&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Port Moody&lt;/td&gt;
      &lt;td&gt;33,535&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;City of Langley&lt;/td&gt;
      &lt;td&gt;28,963&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;White Rock&lt;/td&gt;
      &lt;td&gt;21,939&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Pitt Meadows&lt;/td&gt;
      &lt;td&gt;19,146&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Metro Vancouver A&lt;/td&gt;
      &lt;td&gt;18,612&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Bowen Island&lt;/td&gt;
      &lt;td&gt;4,256&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Tsawwassen&lt;/td&gt;
      &lt;td&gt;2,256&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Anmore&lt;/td&gt;
      &lt;td&gt;2,356&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Lions Bay&lt;/td&gt;
      &lt;td&gt;1,390&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Belcarra&lt;/td&gt;
      &lt;td&gt;643&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;The &lt;a href=&quot;https://en.wikipedia.org/wiki/Langley,_British_Columbia_(district_municipality)#/media/File:GVRD_Langley_district.svg&quot;&gt;Township of Langley&lt;/a&gt; is a large area, with the city at its centre and a curling club there.&lt;/p&gt;

&lt;p&gt;With zero curling rinks, Burnaby is a standout, however with curling rinks in Vancouver, New Westminster, Coquitlam and Port Moody, it has curling rinks in every adjoining area.&lt;/p&gt;

&lt;p&gt;With a combined population of 190,410 for West Vancouver, District of North Vancouver and the City of North Vancouver, there are 0 curling rinks.&lt;/p&gt;

&lt;p&gt;Most of this data is from &lt;a href=&quot;https://www.curling.ca/about-curling/getting-started-in-curling/find-a-curling-centre/&quot;&gt;Curling Canada website&lt;/a&gt; which has several inaccuracies, unfortunately üëá&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The &lt;a href=&quot;http://www.glanfordcurling.com/&quot;&gt;Glanford Curling Club&lt;/a&gt; is in Ontario, not Coquitlam. Sorry Curling Canada, you got that one wrong.&lt;/li&gt;
  &lt;li&gt;The &lt;a href=&quot;https://deltathistle.ca/&quot;&gt;Delta Thistle Curling Club&lt;/a&gt; is not listed on the Curling Canada site.&lt;/li&gt;
  &lt;li&gt;The &lt;a href=&quot;http://www.nswc.ca/curling.html&quot;&gt;North Shore Winter Club&lt;/a&gt; does not have curling.&lt;/li&gt;
  &lt;li&gt;The &lt;a href=&quot;https://www.hollyburn.org/nor&quot;&gt;Hollyburn Country Club&lt;/a&gt; does not have curling.&lt;/li&gt;
&lt;/ul&gt;
</content>
</entry>

<entry>
<title>Everyone has already done it</title>
<link href="https://mckay.pub/2023-02-22-happened-before/"/>
<updated>2023-02-22T00:00:00+00:00</updated>
<id>https://mckay.pub/happened-before</id>
<content type="html">&lt;p&gt;In my new phase of work, I‚Äôm not trying to build a startup. I‚Äôm trying to do fun things that can solve problems, I get to learn new things and hopefully along the way be of value to some people. In the last few days I‚Äôve ditched a couple of ideas (will blog about why in a bit). As I go through ideas, I‚Äôm reminded of one simple rule:&lt;/p&gt;

&lt;p&gt;‚ÄúEveryone has already done everything‚Äù&lt;/p&gt;

&lt;p&gt;Want to build a cool product? Someone has already done it. Somewhere, sometime, maybe even now, maybe many people.&lt;/p&gt;

&lt;p&gt;It doesn‚Äôt mean you shouldn‚Äôt do it. In fact, at its most simple level its validation that the thing you are planning to build has a market and has users. It means that the market exists. Perhaps they got &lt;a href=&quot;https://www.investopedia.com/terms/f/firstmover.asp&quot;&gt;first mover advantage&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;But this doesn‚Äôt mean you can‚Äôt do it: faster, cheaper, or whatever you need to make it happen. Don‚Äôt be intimidated by others in your space, research what they‚Äôve done and then go do it better.&lt;/p&gt;

&lt;p&gt;Before GitHub there was Sourceforge.&lt;/p&gt;

&lt;p&gt;Before Google there was Altavista.&lt;/p&gt;

&lt;p&gt;Before Altavista there was Yahoo!&lt;/p&gt;

&lt;p&gt;‚Ä¶and before before ChatGPT there was Google (just a bit of snark there).&lt;/p&gt;

&lt;p&gt;Or as Battlestar Galactica put it ‚ÄúAll of this has happened before and will happen again.‚Äù&lt;/p&gt;

&lt;p&gt;Related: &lt;a href=&quot;https://consumerist.com/2007/12/29/want-a-thriving-coffee-shop-open-next-to-a-starbucks/&quot;&gt;Want a Thriving Coffee Shop? Open Next to A Starbucks&lt;/a&gt;&lt;/p&gt;
</content>
</entry>

<entry>
<title>No marathons this year</title>
<link href="https://mckay.pub/2023-02-15-no-marathon/"/>
<updated>2023-02-15T00:00:00+00:00</updated>
<id>https://mckay.pub/no-marathon</id>
<content type="html">&lt;p&gt;The last 3 years my goal has to be do marathons and also long 160km+ bike races. But I‚Äôve noticed this has produced a pattern in my behaviour that I‚Äôd like to break. The goal marathon for me has been the Vancouver BMO Marathon in May and we start training in January. So my years goes like this:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;January: I‚Äôm unfit and I‚Äôve eaten too much, time to get into shape and train.&lt;/li&gt;
  &lt;li&gt;February: Ugh, the worst time.&lt;/li&gt;
  &lt;li&gt;March: I‚Äôm doing 20km training runs and feeling good.&lt;/li&gt;
  &lt;li&gt;April: I‚Äôm doing 30km training runs and feeling great. I‚Äôm not cycling enough and the cycling clubs have started.&lt;/li&gt;
  &lt;li&gt;May: Marathon. Marathons hurt, why am I doing this? I hate it. I‚Äôm falling behind on cycling. My legs hurt.&lt;/li&gt;
  &lt;li&gt;June: &lt;strong&gt;I hate running, I‚Äôm never running again.&lt;/strong&gt; I‚Äôm behind on cycling.&lt;/li&gt;
  &lt;li&gt;July: &lt;strong&gt;I hate running, I‚Äôm never running again.&lt;/strong&gt; I can‚Äôt catch up with the cyclists. I‚Äôm off my diet and gaining weight.&lt;/li&gt;
  &lt;li&gt;August: Wow the mountains are amazing I‚Äôm going hiking. Forget running and cycling.&lt;/li&gt;
  &lt;li&gt;September: Big bike races. I hate cycling.&lt;/li&gt;
  &lt;li&gt;October, November, December: I‚Äôve failed at cyling and running and I‚Äôm in a funk. Only 3 months till the cycle starts again.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I peak at the marathon, it ruins my legs and I stop running. The running bites into my cycling and I fail at that. The thing is:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;I‚Äôve not gotten to the point where marathons aren‚Äôt destroying me.&lt;/li&gt;
  &lt;li&gt;Running and cycling both take up lots of time to train a lot.&lt;/li&gt;
  &lt;li&gt;My motivation drops off a cliff after the marathon.&lt;/li&gt;
  &lt;li&gt;I actually enjoy the marathon training, 20-30km distances feel good and I can feel the improvement.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You can see my fitness change here üëá&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/files/fitness-2023.png&quot; width=&quot;400px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Those circles are the BMO Marathon and the Whistler Fondo respectively. You can see the build up before hand, the inconsistency inbetween and then the drop at the end.&lt;/p&gt;

&lt;p&gt;This year I‚Äôm going to try to be more balanced and see if I can:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Just do half marathons, but increase my time regularly instead of aiming for longer distances.&lt;/li&gt;
  &lt;li&gt;Be more balanced, with cycling, running, weights and hiking.&lt;/li&gt;
  &lt;li&gt;Improve and maintain a base level of fitness instead of feeling like I have to climb out of a hole every winter.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;And maybe a triathlon.&lt;/p&gt;
</content>
</entry>

<entry>
<title>Django - still awesome</title>
<link href="https://mckay.pub/2023-02-09-django-still-awesome/"/>
<updated>2023-02-09T00:00:00+00:00</updated>
<id>https://mckay.pub/django-still-awesome</id>
<content type="html">&lt;p&gt;I first started using Django in 2008. That‚Äôs forever ago in internet terms, as a I left Zope and Plone for something better. Later on I got a job at Mozilla doing Django full time, but then became a Manager and then moved on. I haven‚Äôt written Django for anything more than quick side projects for a very long time.&lt;/p&gt;

&lt;p&gt;But in the last couple of weeks I‚Äôve stood up a couple of projects on Django. Honestly its been an experience in learning and remembering how this stuff works. It‚Äôs been a lot of fun. I‚Äôve stood up two Django sites since then and it‚Äôs as I remember, just better.&lt;/p&gt;

&lt;p&gt;I‚Äôm a big fan of making exciting things with boring technology and after all this time Django is one of those ‚Äúboring‚Äù technologies that just works really well.&lt;/p&gt;

&lt;p&gt;Still a fan and that‚Äôs a credit to the people and the community that have kept Django going. Well done to all of you.&lt;/p&gt;

&lt;p&gt;Still prefer to Rails üòÄ&lt;/p&gt;
</content>
</entry>

<entry>
<title>Actions, IPv6 and Fly.io</title>
<link href="https://mckay.pub/2023-02-08-actions-ipv6/"/>
<updated>2023-02-08T00:00:00+00:00</updated>
<id>https://mckay.pub/actions-ipv6</id>
<content type="html">&lt;p&gt;I stood up a service on fly.io as a subdomain of an existing site. You can do this by adding a CNAME record to your DNS pointing to the fly.io instance. In this case &lt;a href=&quot;https://clearwind.ca&quot;&gt;clearwind.ca&lt;/a&gt; is managed on Google Domains and currently points to GitHub pages site. Then &lt;a href=&quot;https://notifications.clearwind.ca&quot;&gt;notifications.clearwind.ca&lt;/a&gt; is a fly.io instance.&lt;/p&gt;

&lt;p&gt;When you do this on the dashboard, you‚Äôll get a page that looks like this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/files/flyio-ipv6.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Added it all in, waited for DNS to update and it all worked. However, when I tried to hit using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wget&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;curl&lt;/code&gt; in GitHub Action, I kept hitting:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Connecting to notifications.clearwind.ca (notifications.clearwind.ca)|2a09:8280:1::db06|:443... failed: Network is unreachable.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It‚Äôs correctly resolved the IPv6 domain, so I wasn‚Äôt quite sure what the problem was. I couldn‚Äôt spot anything in the Actions documentation. In the end it was simple as adding in the IPv4 address for the domain. That isn‚Äôt shown on the fly.io dashboard, but you can find it in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dashboard&lt;/code&gt; &amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Overview&lt;/code&gt; &amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Application&lt;/code&gt; &amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;IP addresses&lt;/code&gt; section.&lt;/p&gt;

&lt;p&gt;In my case adding in an A name to that IP address fixed the issue and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;curl&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wget&lt;/code&gt; worked as expected. Why fly.io is doing this is &lt;a href=&quot;https://community.fly.io/t/announcement-shared-anycast-ipv4/9384&quot;&gt;covered here&lt;/a&gt;.&lt;/p&gt;
</content>
</entry>

</feed>
