<!DOCTYPE html>
<html lang="en">
<head>
<!-- Last built: 2021-12-05T00:29:24+00:00 -->
<meta charset="utf-8" />
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<title>Andy McKay :: Downloading Firefox Marketplace Apps</title>
<link href="/css/style.css?v=2021-12-05T00:29:24+00:00" rel="stylesheet" type="text/css">
<link href="/css/pygments.css?v=2021-12-05T00:29:24+00:00" rel="stylesheet" type="text/css">
<link rel="shortcut icon" type="image/ico" href="/images/favicon.ico" />
<link rel="alternate" href="/atom.xml" type="application/atom+xml">
<meta name="viewport" content="initial-scale=1, maximum-scale=1">
</head>
<body>
<div id="main">
<header>
  <h1><a href="/">Andy McKay</a></h1>
</header>
<section>
<article>
<div class="meta">Nov 15, 2014</div>
<h2><a href="/2014-11-15-downloading/">Downloading Firefox Marketplace Apps</a></h2>
<hr class="florished">
<p>Apps can be freely downloaded from the Marketplace and that’s a good thing. Yet every few weeks we get a bug filed along the lines of “you can download apps from the Marketplace without doing…” and we have to close it. This blog post is an explanation of why.</p>

<h2>Hosted apps</h2>

<p>In the beginning there were hosted apps. Hosted apps are completely hosted on the developers site, the manifest for that app is uploaded to the Marketplace and extra data added. In this scenario the Marketplace does not have any of the code for the app.</p>

<p>For this reason, we can’t prevent downloading of hosted apps, any of the content or media for the app because the app and its media all exists on the developers site. All we do is point to the developers site.</p>

<p>For this reason, we also cannot prevent the downloading or installing of hosted apps that request a payment before installing. Paid apps can still be directly downloaded and installed from the developers site.</p>

<p>Paid apps do not restrict the installation of an app as a way to enforce payment. Instead we use a <a href="https://wiki.mozilla.org/Apps/WebApplicationReceipt">receipt checking mechanism</a>. When a payment is processed, the app is installed and a receipt is installed for the app. That receipt is added at install time and it’s the app developers job to check that receipt.</p>

<p>Using receipts to enforce payment have a couple of advantages: receipts can come from any store that the developer chooses to accept, receipts can be revoked when refunds or other actions occur.</p>

<h2>Packaged apps</h2>

<p>Then enter packaged apps which were primarily added to allow developers to access sensitive APIs on the Firefox OS phone. A packaged app is the contents of the site zipped up and uploaded to the Marketplace.</p>

<p>Since the app contents are on the Marketplace, they can be reviewed for any malicious behaviour and signed. The platform downloads the packaged app and installs it, checking the signature on the way.</p>

<p>Any packaged app can be downloaded once its been made public. We don’t restrict downloads, the contents of the packaged app are not secret and not intended to do so.</p>

<p>Similarly paid packaged apps do not restrict the installation of an app as a way to enforce payment. Instead we use the receipt <em>exactly</em> the same way as a paid hosted app.</p>

<p>In fact packaged apps are seen as a bit of hack and something Mozilla should not be focusing on long term. There’s a rather long <a href="https://www.mail-archive.com/dev-b2g@lists.mozilla.org/msg10022.html">mailing list thread on this subject</a> and it sounds like the next iteration will be “browseable packaged apps” where it signed and hosted by the developer</p>

<h2>Restriction of downloads</h2>

<p>So then people file bugs stating “I can download any packaged app, even paid ones, the Marketplace is broken!”. To repeat, downloads of paid apps are allowed, the receipt mechanism is the enforcement of payment. If you are an app developer and upload a paid app and do not check the receipt to prove payment, then that’s your problem.</p>

<p>“Shouldn’t we be protecting proprietary content in the packaged apps by preventing download?”. Really? Should we be doing that? Just think about that for a moment. The developer can protect proprietary content within a packaged app, put it on their server and restrict the download through a mechanism of your choosing [<a href="#1">1</a>].</p>

<p>If we tried to stop this, it would be completely ineffective. All it takes is one person to download the packaged app, unzip it and grab that content and share it with everyone. It will probably be completely ineffective if you did it too, but it’s not a promise we are going to make.</p>

<p>Remember this is an open platform and open technology. This is the key difference between the Marketplace and every other app store out there. We don’t require you to use our payment system. We don’t want any obfuscation or source code protection mechanisms on the platform. We don’t try and make it difficult to pull apps off phones. Apps can be re-used on devices and platforms that support the open web.</p>

<p>This is the web, this is Mozilla, it’s open. All roads on this approach lead to the rabbit hole that is DRM [<a href="#1">1</a>].</p>

<p>For that reason, currently the Marketplace doesn’t restrict download of packaged apps.</p>

<p>[<a name="1">1</a>] Yes I know <a href="https://blog.mozilla.org/blog/2014/05/14/drm-and-the-challenge-of-serving-users/">Mozilla announced this</a> so at least that’s a route you can go for protecting your content. Apps don’t exist inside that DRM bubble.</p>

<div id="navigation">
  <a href="/2014-11-10-moz/">&laquo; older</a>
  <a href="/2014-12-14-examination/">newer &raquo;</a>
</div>

</article>
</section>
<footer>
<div id="thefooter">
  <p>
    <a href="/">Home</a> &bull;
    <a href="/archives/">Archives</a>
  </p>
  <p>
    I work at <a href="https://github.com">GitHub</a>. I used to be at <a href="https://www.mozilla.com">Mozilla</a>.<br />
    <a href="mailto:andy@mckay.pub">andy@mckay.pub</a> &bull;
    <a href="https://mckay.pub.ca/atom.xml">RSS</a><br />
    <a href="https://twitter.com/andymckay">Twitter</a> &bull;
    <a href="https://www.linkedin.com/pub/andy-mckay/11/225/aa1">Linkedin</a> &bull;
    <a href="https://github.com/andymckay">GitHub</a><br />
  </p>
</div>
</footer>
</div>
</body>
</html>
